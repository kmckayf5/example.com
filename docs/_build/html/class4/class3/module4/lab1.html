
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4.4.1. iRules LX Streaming &#8212; EXAMPLE.COM  documentation</title>
    
    <link rel="stylesheet" href="../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/f5_agility_theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
<!--
# Copyright 2017 F5 Networks
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
-->
<link href="https://cdn.f5.com/favicon.ico" rel="icon">
<script src="https://use.fontawesome.com/21fb8a09c3.js"></script>
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>
  <body>
  <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="row corp-header">
      <div class="container corp-header">
        <div class="container corp-menu">
          <ul>
            <li><a href="https://f5.com" class="internalLink">F5.com</a></li>
            <li><a href="https://support.f5.com">Support</a></li>
            <li><a href="https://devcentral.f5.com">Community</a></li>
            <li><a href="https://github.com/F5Networks">GitHub</a></li>
            <li><a href="https://f5.com/about-us/careers">Careers</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="row pageHeader">
      <div class="container stat">
        <div class="col-xs-12 stat">
          <a class="internalLink" href="https://f5.com">
            <img class="logo" src="https://cdn.f5.com/websites/support/assets/images/logo.svg" width="50" height="44" alt="F5 Networks" title="F5 Networks" border="0">
          </a>
            <ul id="MainMenu" class="main-menu">
              <li>
                <a href="#">Products
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>

                <div class="menu-panel soft-hide" id="ProductsSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third"><span class="a-mm-h">Connectors</span>
                        <ul>
                          <li><a href="http://clouddocs.f5.com/products/connectors/marathon-bigip-ctlr/latest" data-link-type="Nav: Mega">F5 Marathon BIG-IP Controller</a></li>
                          <li><a href="http://clouddocs.f5.com/products/connectors/marathon-asp-ctlr/latest" data-link-type="Nav: Mega">F5 Marathon ASP Controller</a></li>
                          <li><a href="http://clouddocs.f5.com/products/connectors/k8s-bigip-ctlr/latest" data-link-type="Nav: Mega">F5 Kubernetes BIG-IP Controller</a></li>
                          <li><a href="http://clouddocs.f5.com/products/connectors/f5-kube-proxy/latest" data-link-type="Nav: Mega">F5 Kubernetes Proxy</a></li>
                        </ul>
                        <!--span class="seemore"><a data-link-type="Nav: Mega" href="/products/connectors">See all </a></--span-->
                      </li>
                      <li class="divider"></li>
                      <li class="third"><span class="a-mm-h">Application Service Proxy</span>
                        <ul>
                          <li><a href="http://clouddocs.f5.com/products/asp/latest" data-link-type="Nav: Mega">F5 Application Service Proxy</a></li>
                        </ul>
                        <!--span class="seemore"><a href="/products/">See all </a></span-->
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
              <li>
                <a href="#">Container Integrations
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>

                <div class="menu-panel soft-hide" id="ContainersSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third"><span class="a-mm-h">Container Integrations</span>
                        <ul>
                          <li><a href="http://clouddocs.f5.com/containers/latest/marathon/" data-link-type="Nav: Mega">Mesos Marathon</a></li>
                          <li><a href="http://clouddocs.f5.com/containers/latest/kubernetes/" data-link-type="Nav: Mega">Kubernetes</a></li>
                          <li><a href="http://clouddocs.f5.com/containers/latest/openshift/" data-link-type="Nav: Mega">RedHat OpenShift</a></li>
                        </ul>
                        <span class="seemore"><a data-link-type="Nav: Mega" href="http://clouddocs.f5.com/containers/latest">View details </a></span>
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
              <li>
                <a href="#">Clouds
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>

                <div class="menu-panel soft-hide" id="CloudsSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third"><span class="a-mm-h">Cloud Integrations</span>
                        <ul>
                          <li><a href="http://clouddocs.f5.com/cloud/openstack/" data-link-type="Nav: Mega">OpenStack</a></li>
                        </ul>
                        <!--span class="seemore"><a data-link-type="Nav: Mega" href="/cloud/">See all </a></span-->
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
              <li>
                <a href="#">Resources
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>
                <div class="menu-panel soft-hide" id="UPCProgramSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third">
                        <span class="a-mm-h">Downloads</span>
                        <ul>
                          <li><a target="_blank" data-link-type="Nav: Mega" href="https://hub.docker.com/r/f5networks/" class="internalLink">Docker Hub</a></li>
                          <li><a target="_blank" data-link-type="Nav: Mega" href="https://store.docker.com/images/f5networks" class="internalLink">Docker Store</a></li>
                        </ul>
                      </li>
                      <li class="divider"></li>

                      <li class="third">
                        <span class="a-mm-h">OpenSource</span>
                        <ul>
                          <li><a target="_blank" data-link-type="Nav: Mega" href="https://github.com/F5Networks" class="internalLink">GitHub</a></li>
                        </ul>
                      </li>
                      <li class="divider"></li>

                      <li class="third">
                        <a href="//university.f5.com" class="a-mm-h internalLink" target="_blank" data-link-type="Nav: Mega">F5 University</a>
                        <ul>
                          <li>
                            <p>Get up to speed with free self-paced courses</p>
                          </li>
                        </ul>
                        <a data-ng-href="https://devcentral.f5.com" class="a-mm-h internalLink" target="_blank" data-link-type="Nav: Mega" href="https://devcentral.f5.com">DevCentral</a>
                        <ul>
                          <li>
                            <p>Join the community of 250,000+ technical peers</p>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
            </ul>
        </div>
      </div>
    </div>
  </div> <!-- /container-fluid -->
</nav>

  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-3 col-md-3 sidebar">
         <h4><a href="../../../">EXAMPLE.COM </a></h4>
<div id="searchbox" style="display: none" role="search">
  <form class="search" action="../../../search.html" method="get">
    <div>
      <input type="text" name="q" placeholder="Search" style="padding-left: 6px;"/>
      <!-- <input type="submit" value="Go" style="margin-top: 4px;"/> -->
      <button type="submit" class="btn btn-primary btn-xs">Go</button>
    </div>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <p class="caption">
   <span class="caption-text">Current Page</span>
  </p>
  <ul>
<li><a class="reference internal" href="#">4.4.1. iRules LX Streaming</a><ul>
<li><a class="reference internal" href="#creating-and-implementing-a-streaming-lx-plugin">4.4.1.1. Creating and Implementing a Streaming LX Plugin</a><ul>
<li><a class="reference internal" href="#review-the-lx-workspace-and-install-npm-package">4.4.1.1.1. Review the LX Workspace and Install NPM package</a></li>
<li><a class="reference internal" href="#create-the-lx-plugin">4.4.1.1.2. Create the LX Plugin</a></li>
<li><a class="reference internal" href="#create-the-irules-lx-profile">4.4.1.1.3. Create the iRules LX Profile</a></li>
<li><a class="reference internal" href="#assign-the-irules-lx-profile-to-virtual-servers">4.4.1.1.4. Assign the iRules LX Profile to Virtual Servers</a></li>
<li><a class="reference internal" href="#test-the-ilx-streaming-plugin">4.4.1.1.5. Test the ILX Streaming Plugin</a></li>
</ul>
</li>
<li><a class="reference internal" href="#create-and-implement-an-http-server-lx-plugin">4.4.1.2. Create and Implement an HTTP server LX Plugin</a><ul>
<li><a class="reference internal" href="#review-the-lx-workspace">4.4.1.2.1. Review the LX Workspace</a></li>
<li><a class="reference internal" href="#create-the-lx-plugin-profile-and-attach-to-virtual-server">4.4.1.2.2. Create the LX Plugin, Profile and Attach to Virtual Server</a></li>
<li><a class="reference internal" href="#test-the-ilx-http-plugin">4.4.1.2.3. Test the ILX HTTP Plugin</a></li>
</ul>
</li>
</ul>
</li>
</ul>


<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html">Topology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class1/class1.html">LTM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class2/class2.html">DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class3/class3.html">WAF</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class5/class5.html">Troubleshooting</a></li>
</ul>

        
      </div>
      <div class="col-md-offset-3 col-sm-offset-3 main">
        <h4>
          <a href="/">Community Training Classes &amp; Labs</a> &gt; <a href="../../../index.html">EXAMPLE.COM</a>
          <span class="right"><a href="../../../genindex.html">Index</a></span>
        </h4>
        
  <div class="section" id="irules-lx-streaming">
<h1>4.4.1. iRules LX Streaming<a class="headerlink" href="#irules-lx-streaming" title="Permalink to this headline">¶</a></h1>
<div class="section" id="creating-and-implementing-a-streaming-lx-plugin">
<h2>4.4.1.1. Creating and Implementing a Streaming LX Plugin<a class="headerlink" href="#creating-and-implementing-a-streaming-lx-plugin" title="Permalink to this headline">¶</a></h2>
<p>In this lab we will be loading an LX plugin in streaming mode. To keep
the lab simple, we will only be loading a plugin that will print the
client data to hexdump format in the log files.</p>
<div class="section" id="review-the-lx-workspace-and-install-npm-package">
<h3>4.4.1.1.1. Review the LX Workspace and Install NPM package<a class="headerlink" href="#review-the-lx-workspace-and-install-npm-package" title="Permalink to this headline">¶</a></h3>
<p>The first thing we need to do is view the LX Workspace. On the desktop,
navigate over to the LX workspaces menu in the tab located at <em>Local
Traffic &gt; iRules &gt; LX Workspaces</em>. Then click the workspace named
<em>ilxlab4_stream</em>. You should see an extension named hexdump, then click
on the <em>index.js</em> file. Also, we should note that you will not see a TCL
rule in the workspace.</p>
<p>Just for reference, here is the Node.js code below:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
<span class="c1">// Hexdump all client data to stdout on L4 virtual server</span>
<span class="kd">var</span> <span class="nx">f5</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;f5-nodejs&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">plugin</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">f5</span><span class="p">.</span><span class="nx">ILXPlugin</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">hexy</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;hexy&#39;</span><span class="p">);</span>

<span class="c1">// Register a listener for the client ILXPlugin &quot;connect&quot; event</span>
<span class="nx">plugin</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;connect&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">flow</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Register a listener for the ILXStream &quot;data&quot; event</span>
  <span class="nx">flow</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hexy</span><span class="p">.</span><span class="nx">hexy</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span> <span class="c1">//Print the client data to STDOUT</span>
    <span class="nx">flow</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>  <span class="c1">//Pass the client data to the server stream</span>
  <span class="p">})</span>

  <span class="c1">// Create event listeners for error events</span>
  <span class="nx">flow</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">errorText</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;client error event: &#39;</span> <span class="o">+</span> <span class="nx">errorText</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="nx">flow</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">errorText</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;server error event: &#39;</span> <span class="o">+</span> <span class="nx">errorText</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="nx">flow</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">errorText</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;flow error event: &#39;</span> <span class="o">+</span> <span class="nx">errorText</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="c1">// Tell TMM not to send data from server to Node</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">f5</span><span class="p">.</span><span class="nx">ILXPluginOptions</span><span class="p">();</span>
<span class="nx">options</span><span class="p">.</span><span class="nx">handleServerData</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nx">plugin</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span> <span class="c1">//Start the plugin in streaming mode</span>
</pre></div>
</td></tr></table></div>
<p>As you can see from the code above we are loading the hexy package for
doing the hexdumps of the buffer chunk. Therefore, we need to install
this package into the workspace. To do this you will need to SSH to the
BIG-IP and execute the following commands from the BASH prompt:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> <span class="nb">cd</span> /var/ilx/workspaces/Common/ilxlab4_stream/extensions/hexdump/
<span class="gp">#</span> npm install --save hexy
</pre></div>
</div>
</div>
<div class="section" id="create-the-lx-plugin">
<h3>4.4.1.1.2. Create the LX Plugin<a class="headerlink" href="#create-the-lx-plugin" title="Permalink to this headline">¶</a></h3>
<p>With our code already in a workspace, you will need to navigate over to
the LX Plugins menu in the tab located at <em>Local Traffic &gt; iRules &gt; LX
Plugins</em>. Click the <em>Create</em> button, name the plugin
<em>ilxlab4_stream_pl</em>, select the <em>ilxlab4_stream</em> workspace and click
finish to save the changes.</p>
<p>We still need to configure a few more things so once you are back to the
LX Plugin list, click on the <em>ilxlab4_stream_pl</em> plugin and then click
on the <em>hexdump</em> extension. Change the following settings:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="15%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">New Value</th>
<th class="head">Reason</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Concurrency Mode</td>
<td>Single</td>
<td>Keep logs for all connections in a single file.</td>
</tr>
<tr class="row-odd"><td>iRules LX Logging</td>
<td>Checked</td>
<td>Will make extension send logs to dedicated file.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="create-the-irules-lx-profile">
<h3>4.4.1.1.3. Create the iRules LX Profile<a class="headerlink" href="#create-the-irules-lx-profile" title="Permalink to this headline">¶</a></h3>
<p>Since iRules LX Streaming does not require the use of TCL iRules, we
need a method to associate an LX Plugin to a virtual server. That is
done with an iRules LX profile. To create a new iRules LX profile,
navigate to the menu <em>Local Traffic &gt; Profiles &gt; Other &gt; iRules LX</em> and
click the + sign.</p>
<p>Name the new profile <em>ilxlab4_stream _profile</em>, select the
<em>ilxlab4_stream_pl</em> LX Plugin and click finish to save the changes.</p>
</div>
<div class="section" id="assign-the-irules-lx-profile-to-virtual-servers">
<h3>4.4.1.1.4. Assign the iRules LX Profile to Virtual Servers<a class="headerlink" href="#assign-the-irules-lx-profile-to-virtual-servers" title="Permalink to this headline">¶</a></h3>
<p>Now we need to attach our profile to a virtual server. Go into the
virtual server <em>ilxlab4_stream_vs</em> main configuration “properties”
window (not the resources tab), then expand the Configuration menu
to the advanced setting and you will see the iRules LX Profile setting
as shown here:</p>
<p><a class="reference internal" href="_static/class3/image19.png"><img alt="image18" src="_static/class3/image19.png" style="width: 4.67675in; height: 3.65336in;" /></a></p>
<p>Select the <em>ilxlab4_stream _profile</em> then click update at the bottom
to save the changes.</p>
</div>
<div class="section" id="test-the-ilx-streaming-plugin">
<h3>4.4.1.1.5. Test the ILX Streaming Plugin<a class="headerlink" href="#test-the-ilx-streaming-plugin" title="Permalink to this headline">¶</a></h3>
<p>Now we should be able to see the hexdumps in the log file. First, in an
SSH session with the BIG-IP, tail the log file of the plugin with the
following command:</p>
<p><code class="docutils literal"><span class="pre">#</span> <span class="pre">tail</span> <span class="pre">-f</span>&#160; <span class="pre">/var/log/ilx/Common.</span> <span class="pre">ilxlab4_stream_pl.hexdump</span></code></p>
<p>Then refresh the page in the browser (URL <a class="reference external" href="http://10.0.0.23/ilxlab4stream">http://10.0.0.23/ilxlab4stream</a>)
and you should see output like this in the SSH terminal:</p>
<p><a class="reference internal" href="_static/class3/image20.png"><img alt="image19" src="_static/class3/image20.png" style="width: 6.30972in; height: 3.47979in;" /></a></p>
</div>
</div>
<div class="section" id="create-and-implement-an-http-server-lx-plugin">
<h2>4.4.1.2. Create and Implement an HTTP server LX Plugin<a class="headerlink" href="#create-and-implement-an-http-server-lx-plugin" title="Permalink to this headline">¶</a></h2>
<p>In this lab exercise, we will use the LX plugin as an HTTP server. The
virtual server that we will use this LX Plugin is the
<em>ilxlab4_http_vs</em> (10.0.0.24) virtual server which does not have a pool attached
to it. This VS does not have an HTTP profile associated with it as use
of the iRules LX HTTP server requires this configuration.</p>
<div class="section" id="review-the-lx-workspace">
<h3>4.4.1.2.1. Review the LX Workspace<a class="headerlink" href="#review-the-lx-workspace" title="Permalink to this headline">¶</a></h3>
<p>Go to the LX workspace named <em>ilxlab4_http</em>, click on the extension
folder named <em>http_server</em> and click on the <em>index.js</em> file. You should
see code that looks like this:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
<span class="c1">// Use iRules LX as simple HTTP server</span>
<span class="kd">var</span> <span class="nx">f5</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;f5-nodejs&#39;</span><span class="p">);</span>

<span class="c1">// Create the HTTP request callback function</span>
<span class="kd">function</span> <span class="nx">httpRequestCallback</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span>  <span class="s1">&#39;&lt;html&gt;&lt;body&gt;&lt;h1&gt;ILX HTTP Server&lt;/h1&gt;&#39;</span><span class="p">;</span>
  <span class="nx">msg</span> <span class="o">+=</span> <span class="s1">&#39;&lt;p&gt;Welcome client &quot;&#39;</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">remoteAddress</span> <span class="o">+</span> <span class="s1">&#39;&quot;. &#39;</span><span class="p">;</span>
  <span class="nx">msg</span> <span class="o">+=</span> <span class="s1">&#39;Your HTTP method is &#39;</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">method</span> <span class="o">+</span> <span class="s1">&#39;.&lt;/p&gt;&#39;</span><span class="p">;</span>
  <span class="nx">msg</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">;</span>
  <span class="c1">// Set HTTP respond, send reply and close connection.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;text/html&#39;</span><span class="p">});</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">plugin</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">f5</span><span class="p">.</span><span class="nx">ILXPlugin</span><span class="p">();</span>
<span class="nx">plugin</span><span class="p">.</span><span class="nx">startHttpServer</span><span class="p">(</span><span class="nx">httpRequestCallback</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="create-the-lx-plugin-profile-and-attach-to-virtual-server">
<h3>4.4.1.2.2. Create the LX Plugin, Profile and Attach to Virtual Server<a class="headerlink" href="#create-the-lx-plugin-profile-and-attach-to-virtual-server" title="Permalink to this headline">¶</a></h3>
<p>With our code already in a workspace, all we need to do is create our LX
Plugin and iRules LX profile, and attach the profile to the virtual
server. Name your LX Plugin <em>ilxlab4_http_pl</em>. Create the iRules LX
profile with the name of <em>ilxlab4_http_profile</em> and attach it to the
<em>ilxlab4_http_vs</em> virtual server.</p>
</div>
<div class="section" id="test-the-ilx-http-plugin">
<h3>4.4.1.2.3. Test the ILX HTTP Plugin<a class="headerlink" href="#test-the-ilx-http-plugin" title="Permalink to this headline">¶</a></h3>
<p>In your web browser’s 2<sup>nd</sup> tab type in the URL <a class="reference external" href="http://10.0.0.24">http://10.0.0.24</a>.
You should see a web page like this –</p>
<p><a class="reference internal" href="_static/class3/image21.png"><img alt="image20" src="_static/class3/image21.png" style="width: 4.17027in; height: 1.29401in;" /></a></p>
</div>
</div>
</div>


        
      </div>
    </div>
  </div>


  <footer>
      <div class="container-fluid">
        <div class="row">
          <div class="content-fluid pre-footer">
            <div class="blocks-container">
              <div class="block">
                <h3>Support Programs</h3>
                <p>Regionally located support centers enable F5 to provide support in a number of languages through native-speaking support engineers.</p>
                <a class="btn internalLink" data-ng-href="https://f5.com/support/support-offerings" target="_blank" href="https://f5.com/support/support-offerings">See more
                  <span class="icon-1x-right icon-new-window" data-icon="new-window">​</span>
                </a>
              </div>
              <div class="block">
                <h3>Contact Support</h3>
                <p>
                  North America: 1-888-882-7535<br>
                  Outside North America: 800-11-275-435
                </p>
                <a class="btn internalLink" data-ng-href="https://f5.com/about-us/contact#regional-support" target="_blank" href="https://f5.com/about-us/contact#regional-support">Local Support Numbers
                  <span class="icon-1x-right icon-new-window" data-icon="new-window">​</span>
                </a>
              </div>
              <div class="block">
                <h3>Feedback and Help</h3>
                <p>Have questions, suggestions, or just want to get something off your chest? Let us know.</p>
                <a class="btn" data-ui-sref="siteFeedback" target="_blank" href="https://support.f5.com/csp/siteFeedback">Leave feedback</a>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="footer">
            <div class="container">
              <div class="col-sm-3 col-md-2">
                <h4>About F5</h4>
                <ul>
                  <li><a data-ng-href="https://f5.com/about-us/contact" target="_blank" data-link-type="footer" href="https://f5.com/about-us/contact" class="internalLink">Contact F5</a>
                  </li>
                  <li><a data-ng-href="https://f5.com/about-us/careers" target="_blank" data-link-type="footer" href="https://f5.com/about-us/careers" class="internalLink">Careers</a>
                  </li>
                </ul>
              </div>
              <div class="col-sm-3 col-md-2">
                <h4>Education</h4>
                <ul>
                  <li><a data-ng-href="https://f5.com/education/training" target="_blank" data-link-type="footer" href="https://f5.com/education/training" class="internalLink">Training</a>
                  </li>
                  <li><a data-ng-href="https://f5.com/education/certification" target="_blank" data-link-type="footer" href="https://f5.com/education/certification" class="internalLink">Certification</a>
                  </li>
                  <li><a data-ng-href="https://f5.com/education/training/free-courses" target="_blank" data-link-type="footer" href="https://f5.com/education/training/free-courses" class="internalLink">Free Online Training</a>
                  </li>
                </ul>
              </div>

              <div class="col-sm-3 col-md-2">
                <h4>F5 sites</h4>
                <ul>
                <li><a data-ng-href="https://f5.com" target="_blank" data-link-type="footer" href="https://f5.com" class="internalLink">F5.com</a>
                </li>
                <li><a data-ng-href="https://devcentral.f5.com" target="_blank" data-link-type="footer" href="https://devcentral.f5.com" class="internalLink">Community</a>
                </li>
                <li><a data-ng-href="https://partners.f5.com" target="_blank" data-link-type="footer" href="https://partners.f5.com" class="internalLink">Partners</a>
                </li>
            </ul>
        </div>

        <div class="col-sm-3 col-md-2">
            <h4>Support Tasks</h4>
            <ul>
                <li><a data-ui-sref="mySupport.createServiceRequest" data-link-type="footer" href="https://support.f5.com/csp/my-support/service-request">Create Service Request </a>
                </li>
                <li><a data-ng-href="https://f5.com/about-us/contact#regional-support" target="_blank" data-link-type="footer" href="https://f5.com/about-us/contact#regional-support" class="internalLink">Contact Support</a>
                </li>
                <li><a data-ui-sref="siteFeedback" target="_blank" data-link-type="footer" href="https://support.f5.com/csp/siteFeedback">Leave feedback [+]</a>
                </li>
            </ul>
        </div>

        <div class="col-xs-12 col-md-3 right">
            <h4>Connect with us</h4>
            <ul class="social_icons">
                <li><a href="//twitter.com/f5networks" target="_blank" data-name="twitter" data-type="" data-prefix="social" data-utf="E032" title="Twitter" class="externalLink"><i class="icon-1x icon-twitter icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a href="//www.linkedin.com/companies/f5-networks" target="_blank" class="linkedin externalLink" title="LinkedIn"><i class="icon-1x icon-linkedin icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a href="//www.facebook.com/f5networksinc" target="_blank" class="facebook externalLink" title="Facebook"><i class="icon-1x icon-facebook icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a href="//www.youtube.com/f5networksinc" target="_blank" class="youtube externalLink" title="YouTube"><i class="icon-1x icon-youtube icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a data-ng-href="https://devcentral.f5.com" target="_blank" class="devcentral internalLink" title="DevCentral" href="https://devcentral.f5.com"><i class="icon-1x icon-dc-pos icon-inverse-circle" data-link-type="footer"></i></a></li>
            </ul>
        </div>

        <div class="content-fluid left">
            <div class="col-xs-12">
                <p>
                    © Copyright <span class="ng-binding">2017</span> by F5 Networks, Inc. |
                    <a data-ng-href="https://f5.com/about-us/policies" target="_blank" data-link-type="footer" href="https://f5.com/about-us/policies" class="internalLink">Policies</a> |
                    <a data-ng-href="https://f5.com/about-us/policies/trademarks" target="_blank" data-link-type="footer" href="https://f5.com/about-us/policies/trademarks" class="internalLink">Trademarks</a>
                </p>
            </div>
        </div>
    </div>
</div>
    </div>
</div>
</footer>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="../../../_static/js/bootstrap.min.js"></script>
  <script type="text/javascript">
    jQuery.noConflict(true)
  </script>
  </body>
</html>